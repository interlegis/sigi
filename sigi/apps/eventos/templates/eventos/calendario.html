{% extends "admin/base_site.html" %}
{% load i18n %}
{% load static %}

{% block extrastyle %}
	{{ block.super }}
	<link rel="stylesheet" type="text/css" href="/static/css/calendario.css">
{% endblock %}

{% block breadcrumbs %}{% endblock %}
{% block coltype %}colMS{% endblock %}

{% block content %}
	<div class="fixed-action-btn">
		<a class="btn-floating">
			<i class="large material-icons">mode_edit</i>
		</a>
		<ul>
			<li>
				{% if formato == 'cal' %}
					<a class="btn-floating btn-small" href="?ano={{ ano_pesquisa|safe }}&mes={{ mes_pesquisa|safe }}&fmt=tab" title="{% trans 'Formato de lista' %}"><i class="material-icons">view_list</i></a>
				{% else %}
					<a class="btn-floating btn-small" href="?ano={{ ano_pesquisa|safe }}&mes={{ mes_pesquisa|safe }}&fmt=cal" title="{% trans 'Formato de calendÃ¡rio' %}"><i class="material-icons">date_range</i></a>
				{% endif %}
			<li>
				<a class="btn-floating btn-small" href="?ano={{ ano_pesquisa|safe }}&mes={{ mes_pesquisa|safe }}&pdf=1" target="_blank"><i class="material-icons">picture_as_pdf</i></a>
			</li>
		</ul>
	</div>
	<div class="row">
		<div class="col s12">
			<ul class="tabs">
			{% for ano in meses %}
				<li class="tab col"><a {% if ano == ano_pesquisa %}class="active"{% endif %} href="#tab-{{ ano|safe }}">{{ ano| safe }}</a></li>
			{% endfor %}
			</ul>
		</div>
		{% for ano, lista in meses.items %}
		<div id="tab-{{ ano|safe }}" class="col s12">
			{% for mes, nome in lista.items %}
			<a class="waves-effect waves-light btn-flat btn-small{% if ano == ano_pesquisa and mes == mes_pesquisa %} disabled{% endif %}" href="?ano={{ ano|safe }}&mes={{ mes|safe }}&fmt={{ formato }}">{{ nome }}</a>
			{% endfor %}
		</div>
		{% endfor %}
	</div>
	{% if formato == "cal" %}
		{% include "eventos/snippets/calendario_cal.html" %}
	{% else %}
		{% include "eventos/snippets/calendario_lista.html" %}
	{% endif %}
	{% include "eventos/snippets/calendario_modals.html" %}
{% endblock %}

{% block footer %}
  {{ block.super }}
	<script>
		$(document).ready(function(){
			M.Tabs.init($('.tabs'), {});
			M.Modal.init($(".modal"), {});
			M.FloatingActionButton.init($(".fixed-action-btn"), {hoverEnabled: false});
		});
	</script>
{% endblock %}
