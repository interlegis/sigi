{% extends "admin/base_site.html" %}
{% load i18n static %}

{% block content %}
{{ block.super }}
<form action="" method="post" name="convite" enctype="multipart/form-data">{% csrf_token %}
  <div class="row">
    <div class="col s12">
      <h5>
        {% blocktranslate with casa_nome=casa.nome evento_nome=evento.nome %}
        Convidar {{ casa_nome }} para {{ evento_nome }}
        {% endblocktranslate %}
      </h5>
    </div>
  </div>
  <div class="row">
    <div class="col s12">
      <div class="card">
        <div class="card-content">
          <span class="card-title">{% trans "Convite" %}</span>
          {{ form_convite }}
        </div>
      </div>
    </div>
  </div>
  <div class="row">
    <div class="col s12">
      <div class="card">
        <div class="card-content">
          <span class="card-title">{% trans "Casa" %}</span>
          {{ form_casa }}
        </div>
      </div>
    </div>
  </div>
  <div class="row">
    <div class="col s12">
      <div class="card">
        <div class="card-content">
          <span class="card-title">{% trans "Dados do presidente" %}</span>
          {{ form_presidente }}
        </div>
      </div>
    </div>
  </div>
  <div class="row">
    <div class="col s12">
      <div class="card">
        <div class="card-content">
          <span class="card-title">
            {% trans "Dados do contato Interlegis" %}
            <a href="#" id="copiar-presidente" class="waves-effect waves-light btn-small light-green accent-1 right">
              <i class="material-icons left">content_copy</i>
              {% trans "Copiar dados do presidente" %}
            </a>
          </span>
          {{ form_contato }}
        </div>
      </div>
    </div>
  </div>
  <div class="row">
    <div class="col s12">
      <div class="card">
        <div class="card-action">
          <button class="btn waves-effect waves-light" type="submit" name="save">
            {% trans "Save" %}
            <i class="material-icons right">send</i>
          </button>
          {% for proj in projetos %}
          <button class="btn waves-effect waves-light" type="submit" name="save" value="{{ proj.id }}">
            {% blocktrans with sigla=proj.sigla %}Gerar minuta de {{ sigla}}{% endblocktrans %}
            <i class="material-icons right">picture_as_pdf</i>
          </button>
          {% endfor %}
        </div>
      </div>
    </div>
  </div>
</form>
{% endblock %}

{% block footer %}
  {{ block.super }}
  <script>
    $(document).ready(function() {
      $("#copiar-presidente").click(function(event) {
        event.preventDefault();
        var dados = {{% for field in form_presidente %}
          {{ field.name }}: $("#{{ field.id_for_label }}").val(),{% endfor %}
        };
        {% for field in form_contato %}
          $("#{{ field.id_for_label }}").val(dados.{{ field.name }});
        {% endfor %}
      })
    })
  </script>
{% endblock %}